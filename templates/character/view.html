{% extends "layout.html" %}
{% block body %}
<script src="//zam.zamimg.com/j/tooltips.js"></script>
<script>
function checkSubmit(e) {
	if(e && e.keyCode == 13) {
		document.forms[0].submit();
	}
}
</script>
<script language="javascript" type="text/javascript">  
$(document).ready(function() {
	var weightId = 1;
	$("#add_weight").click(function() {
		$("#stat_weights").append("<tr><td><select name=\"weight_" + weightId + "\"><option value=\"a_agi\">Agility</option><option value=\"a_cha\">Charisma</option><option value=\"a_dex\">Dexterity</option><option value=\"a_int\">Intelligence</option><option value=\"a_sta\">Stamina</option><option value=\"a_str\">Strength</option><option value=\"a_wis\">Wisdom</option><option value=\"h_agi\">Heroic Agility</option><option value=\"h_cha\">Heroic Charisma</option><option value=\"h_dex\">Heroic Dexterity</option><option value=\"h_int\">Heroic Intelligence</option><option value=\"h_sta\">Heroic Stamina</option><option value=\"h_str\">Heroic Strength</option><option value=\"h_wis\">Heroic Wisdom</option><option value=\"ac\">Armor Class</option><option value=\"hp\">Hit Points</option><option value=\"mana\">Mana</option><option value=\"clair\">Clairvoyance</option><option value=\"healing\">Healing Amount</option><option value=\"spell\">Spell Damage</option><option value=\"ratio\">Weapon Ratio</option><option value=\"damage\">Weapon Damage</option><option value=\"r_cold\">Resist Cold</option><option value=\"r_corr\">Resist Corruption</option><option value=\"r_dis\">Resist Disease</option><option value=\"r_fire\">Resist Fire</option><option value=\"r_mag\">Resist Magic</option><option value=\"r_poi\">Resist Poison</option><option value=\"focus\">Focus Amount Multiplier</option><option value=\"skill_Backstab\">Backstab Bonus Damage</option><option value=\"skill_Kick\">Kick Bonus Damage</option><option value=\"skill_Flying\">Flying Kick Bonus Damage</option><option value=\"skill_Frenzy\">Frenzy Bonus Damage</option><option value=\"purity\">Purity</option></select></td><td><input name=\"stat_weight_" + weightId + "\" size=\"3\" value=\"1\"></td><td><input type=\"button\" class=\"removerow\" value=\"-\"></td></tr>");
		weightId++;
		$(".removerow").on('click', function() {
			$(this).parent().parent().remove();
		});
	});
});
</script>
<h4>{{char_data.name}} the {{char_data.charrace}} {{char_data.charclass}}</h4>
{% if not items %}
 This character does not any items associated with it
{% else %}
<h4>Items</h4>
 <table class="table-bordered">
  <thead>
   <th>Slot</th>
   <th>Augment Slot</th>
   <th>Item Name</th>
  </thead>
  {% for entry in items %}
   <tr>
    {% if entry.aug %}
     <td>{{entry.slot}} Aug</td>
	 <td>{{entry.aug_slot}}</td>
	 <td><a href="http://everquest.allakhazam.com/db/item.html?item={{entry.alla}}" data-eq="item={{entry.alla}}">{{entry.name}}</a></td>
	{% else %}
	 <td>{{entry.slot}}</td>
	 <td></td>
	 <td><a href="http://everquest.allakhazam.com/db/item.html?item={{entry.alla}}" data-eq="item={{entry.alla}}">{{entry.name}}</a></td>
	{% endif %}
   </tr>
  {% endfor %}
 </table>
{% endif %}
<h4>Weights</h4>
 {% set translation = {'a_agi': 'Agility',
					   'a_cha': 'Charisma',
					   'a_dex': 'Dexterity',
					   'a_int': 'Intelligence',
					   'a_sta': 'Stamina',
					   'a_str': 'Strength',
					   'a_wis': 'Wisdom',
					   'h_agi': 'Heroic Agility',
					   'h_cha': 'Heroic Charisma',
					   'h_dex': 'Heroic Dexterity',
					   'h_int': 'Heroic Intelligence',
					   'h_sta': 'Heroic Stamina',
					   'h_str': 'Heroic Strength',
					   'h_wis': 'Heroic Wisdom',
					   'ac': 'Armor Class',
					   'hp': 'Hit Points',
					   'mana': 'Mana',
					   'clair': 'Clairvoyance',
					   'healing': 'Healing Amount',
					   'spell': 'Spell Damage',
					   'ratio': 'Weapon Ratio',
					   'damage': 'Weapon Damage',
					   'r_cold': 'Resist Cold',
					   'r_corr': 'Resist Corruption',
					   'r_dis': 'Resist Disease',
					   'r_fire': 'Resist Fire',
					   'r_mag': 'Resist Magic',
					   'r_poi': 'Resist Poison',
					   'focus': 'Focus Amount Multiplier',
					   'purity': 'Purity',
					   'skill_Backstab': 'Backstab Bonus Damage'} %}
 {% if not weights %}
  This character does not have any weights yet
 {% else %}
  {% for weight in weights|sort(attribute='amount', reverse=True) %}
   <li>{{translation[weight.weight]}} : {{weight.amount}}
  {% endfor %}
 {% endif %}
<h4>Add Weights</h4>
 <form actions="{{ url_for('view_character', id=char_id) }}" method="post" class="add-entry">
  <table id="stat_weights" class="smallerfont">
  </table>
  <input type="button" value="Add/Modify Stat Weight" id="add_weight"><br>
  <input type="submit" value="Update Weights">
 </form>
{% endblock %}