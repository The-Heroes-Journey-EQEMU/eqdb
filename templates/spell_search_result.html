{% extends "layout.html" %}
{% block body %}
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        tippy('.spell-tooltip-link', {
            placement: 'right',
            flipDuration: 0,
            content: 'Loading...',
            allowHTML: true,
            maxWidth: 'none',
            onShow(instance) {
                const url = instance.reference.dataset.url;
                fetch(`/spell-tooltip/${encodeURIComponent(url)}`)
                    .then(response => response.text())
                    .then(content => {
                        instance.setContent(content);
                    })
                    .catch(error => {
                        console.error('Error fetching tooltip content:', error);
                    });
            },
        });
    });
</script>
<h3>Search Results:</h3>
{% for entry in data %}
<li><a href="{{url_for('spell_detail', spell_id=entry.spell_id)}}" data-url="{{entry.spell_id}}" class="spell-tooltip-link">{{entry.name}}</a></li>
{% endfor %}
{% endblock %}